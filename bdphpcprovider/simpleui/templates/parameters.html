{% extends "base.html" %}
{% load widget_tweaks %}
{% block content %}



<div class="container">
<div class="row-fluid">
<div class="span1">
<div class="dropdown">
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Directives<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">

            {% for directive in directives %}

            {% if not directive.resource_uri %}
            <li class="divider"></li>
            {% else %}
            <li><a href="{% url makedirective directive.id %}">{{directive.name}}:{{directive.description}}</a></li>
            {% endif %}
            {% endfor %}
          </ul>
        </li>
    </div>
    </div>
    </div>
<div class="row">
<div class="span12">
<h1> {{directive.name}}</h1>
<p class="lead"> {{directive.description}}</p>
</div>
</div>


<div class="row-fluid">
<form class="form-horizontal" name="myform" action="" method="POST"> {% csrf_token %}
    {% if form.non_field_errors %}
   <div class="alert alert-error">
    {{ form.non_field_errors}}
    </div>
    {% endif %}
    {% for data,field in formdata %}
    {% if data.1  %}
    </fieldset>
    <fieldset>
        <legend>{{data.1}} </legend>
    {% endif %}
        {% if field.errors %}
          <div class="control-group error span11 offset1">
            <label class="control-label">{{field.label}}</label>
            <div class="controls">
              {{field|add_class:"span5"}}
              <span class="help-inline">{{field.errors}}</span>
            </div>
          </div>
         {% else %}
         <div class="control-group span11 offset1">
          <label class="control-label" for="id_{{field.html_name}}">{{field.label}}</label>
          <div class="controls">
            {% if data.2 in longfield %}
              {{field|add_class:"span5"|attr:"onchange:chfield(this);"}}
            {% else %}
            {{field|add_class:"span2"|attr:"onchange:chfield(this);"}}
            {% endif %}

              <a href="#" data-toggle="tooltip" tabindex="-1" data-placement="right" title="{{field.help_text}}" id='{{forloop.counter}}'><img  class="icon-question-sign"></a>
              </div>
            </div>
          {% endif %}
      {% endfor %}
      </fieldset>
      <div class="row controls">
        <button type="reset" class="btn" title="Reset">Reset</button>
        <button type="submit" class="offset9 btn btn-primary">Submit Job </button>
      </div>


</form>


<script type="text/javascript">

function chfield(f) {
  {% for data, field in formdata %}
  {% if data.3 %}
  //{{data|safe}}
  if (f.id == "id_{{data.0}}") {
    var x = document.getElementById("id_{{data.3}}");
    if (f.value {{data.4}}) {
      x.disabled=true;
      x.attributes['disabled'] = true;
  }
  else {
   x.disabled=false;
   x.removeAttribute('disabled')
 }

  }
  {% endif %}
  {% endfor %}
}
$(document).ready(function () {
           $('.dropdown-toggle').dropdown();
           {% for data, field in formdata %}
           $('#{{forloop.counter}}').tooltip();
           {% if data.3 %}
           var e = document.getElementById("id_{{data.0}}");
           chfield(e);
           {% endif %}
           {% endfor %}
       });
</script>

</div>


{%endblock %}

